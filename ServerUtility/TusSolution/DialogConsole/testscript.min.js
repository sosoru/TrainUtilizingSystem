(function(){var u,n,t,i,r,e=function(n,t){return function(){return n.apply(t,arguments)}},o={}.hasOwnProperty,f=function(n,t){function r(){this.constructor=n}for(var i in t)o.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},s=this;r={serverAddr:"http://192.168.2.9:8012"},n=function(){function n(n){this.model=n}return n.prototype.getControllerHtml=function(){var n;return n=$.templates(this.model.tmplId).render(this.model.data),$(n)},n.prototype.SendCommand=function(){return $.post(this.model.postAddr,this.model.data)},n}(),t=function(n){function t(n){this.PositionChanged=e(this.PositionChanged,this);var i;i={data:n,tmplId:"#SwitchTemplate",postAddr:r.serverAddr+"/switch"},t.__super__.constructor.call(this,i)}return f(t,n),t.prototype.PositionChanged=function(){var n;return n=this.model.data.CurrentState.Position,n=n==="Straight"?"Curve":"Straight",this.model.data.CurrentState.Position=n,this.SendCommand()},t.prototype.getControllerHtml=function(){var n;return n=t.__super__.getControllerHtml.apply(this,arguments),n.filter(".positionChange").click(this.PositionChanged),n},t}(n),u=function(n){function i(n){var t;t={data:n,tmplId:"#BlockTemplate",postAddr:r.serverAddr+"/block"},i.__super__.constructor.call(this,t)}return f(i,n),i.prototype.createController=function(n){if(n.ModuleType==="AvrSwitch")return new t(n)},i.prototype.getControllerHtml=function(){var t,f,r,n,e,u;for(r=i.__super__.getControllerHtml.apply(this,arguments),u=this.model.data.Devices,n=0,e=u.length;n<e;n++)f=u[n],t=this.createController(f),t!=null&&t.getControllerHtml().appendTo(r);return r},i}(n),i=function(n,t){var u,f,i,e,r;for(r=[],i=0,e=n.length;i<e;i++)u=n[i],f=u.getControllerHtml(),r.push(f.appendTo(t));return r},$(document).ready(function(){var r,n,f;return f=function(){var i,u,r;for(r=[],i=0,u=testswitchdata.length;i<u;i++)n=testswitchdata[i],r.push(new t(n));return r}(),r=function(){var t,r,i;for(i=[],t=0,r=testblockdata.length;t<r;t++)n=testblockdata[t],i.push(new u(n));return i}(),i(f,"#area"),i(r,"#block")})}).call(this)