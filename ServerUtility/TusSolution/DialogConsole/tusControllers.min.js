(function(){var u,n,i,t,f=function(n,t){return function(){return n.apply(t,arguments)}},e={}.hasOwnProperty,r=function(n,t){function r(){this.constructor=n}for(var i in t)e.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n};t={serverAddr:"http://192.168.2.9:8012"},n=function(){function n(n){this.model=n}return n.prototype.getControllerHtml=function(){var n;return n=$.templates(this.model.tmplId).render(this.model.data),$(n)},n.prototype.SendCommand=function(){return $.post(this.model.postAddr,this.model.data)},n}(),i=function(n){function i(n){this.PositionChanged=f(this.PositionChanged,this);var r;r={data:n,tmplId:"#SwitchTemplate",postAddr:t.serverAddr+"/switch"},i.__super__.constructor.call(this,r)}return r(i,n),i.prototype.PositionChanged=function(){var n;return n=this.model.data.CurrentState.Position,n=n==="Straight"?"Curve":"Straight",this.model.data.CurrentState.Position=n,this.SendCommand()},i.prototype.getControllerHtml=function(){var n;return n=i.__super__.getControllerHtml.apply(this,arguments),n.filter(".positionChange").click(this.PositionChanged),n},i}(n),u=function(n){function u(n){var i;i={data:n,tmplId:"#BlockTemplate",postAddr:t.serverAddr+"/block"},u.__super__.constructor.call(this,i)}return r(u,n),u.prototype.createController=function(n){if(n.ModuleType==="AvrSwitch")return new i(n)},u.prototype.getControllerHtml=function(){var t,f,i,n,e,r;for(i=u.__super__.getControllerHtml.apply(this,arguments),r=this.model.data.Devices,n=0,e=r.length;n<e;n++)f=r[n],t=this.createController(f),t!=null&&t.getControllerHtml().appendTo(i);return i},u}(n)}).call(this)